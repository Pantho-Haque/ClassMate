<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- additionals --> <script src="https://use.fontawesome.com/b4f1ce8a81.js"></script> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <link rel="preconnect" href="https://fonts.gstatic.com"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css"> <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script> <!-- additionals --> <link rel="stylesheet" href="styling/main.css"> <link rel="icon" href="resources/ClassMatelogo.png" type="image/icon type"> <title>ClassMate</title> <script> var a = localStorage.getItem("ccmcreatedbypantho"); var b = localStorage.getItem("rollcreatedbypantho"); if (a == null || b == null) { location.replace("index.html"); } </script> </head> <body onload="preloader()"> <div id="preloader"> <img src="resources/preLoader.gif" alt=""> </div> <div id="nav"> <span id="searchbtn"> <img src="resources/friends_search.png" alt="" width="15vw"> <img src="resources/up-arrow.png" alt="" width="15vw"> Search </span> <span id="frndbtn"> <img src="resources/friends.png" alt="" width="15vw"> <img src="resources/up-arrow.png" alt="" width="15vw"> Friends </span> <span>ClassMate</span> <span id="croption">CR Options</span> <span id="logout">Log Out <img src="resources/logout.png" alt="" width="15vw"> </span> </div> <div id="dupnav" style=" height: 82px; background:white; width: 100vw; "> </div> <main> <div id="searchtable"> <input type="search" id="search" placeholder="search"> <div id="tablecont"> <table id="myTable"> <tr> <th>Roll</th> <th>Name</th> <th>Phone Number</th> <th>Email</th> <th>Blood Group</th> <th>Hometown</th> <th>Extra Links</th> </tr> </table> </div> </div> <div id="maintable1"> <div id="frndlst"> </div> </div> <div id="crbox"> </div> <div id="blur"> <div id="qsbox"> <p id="qs">Are you sure you want to log out?</p> <a id="yes" class="waves-effect waves-light btn-small">Yes</a> <a id="no" class="waves-effect waves-light btn-small">No</a> <img id="spinner" src="resources/Spinner.gif" alt="Wait" width="60vw"> </div> </div> <div id="updateblur"> <div id="updateinfobox"> <div id="clsbtn"> <a id="closeupbtn" class="waves-effect waves-light btn-small">Close</a> </div> <div class="row"> <h3 class="dec">Update your info</h3> <form class="col s12"> <div class="row"> <div class="input-field col s12"> <input id="uname" type="text" placeholder="Name"> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="uphone" type="text" placeholder="Phone Number"> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="uemail" type="email" placeholder="Email"> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="uht" type="text" placeholder="Hometown/Address"> </div> </div> <div id="select"> <select class="ui dropdown" id="ubg"> <option value="">Blood Group *</option> <option value="Dontknow">Dont know</option> <option value="a positive(a+)">A+</option> <option value="a negative(a-)">A-</option> <option value="b positive(b+)">B+</option> <option value="b negative(b-)">B-</option> <option value="ab positive(ab+)">AB+</option> <option value="ab negative(ab-)">AB-</option> <option value="o positive(o+)">O+</option> <option value="o negative(o-)">O-</option> </select> </div> <div class="row"> <div class="input-field col s12"> <input id="uext" class="fas fa-external-link-alt" type="text" placeholder="Facebook Link"> </div> </div> </form> </div> <div class="allbtns"> <img id="upspinner" src="resources/Spinner.gif" alt="Wait" width="60vw"> <a id="upaccinfo" class="waves-effect waves-light btn-small bnt cacc2">Update Account Info</a> </div> <form class="col s12"> <div id="passsec"> <div class="row"> <div class="input-field col s12"> <input id="crntpass" type="text" placeholder="Current Password"> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="newpass" type="text" placeholder="New Password"> </div> <div class="input-field col s6"> <input id="rnewpass" type="text" placeholder="Re-type New Password"> </div> </div> <div class="allbtns"> <img id="uppassspinner" src="resources/Spinner.gif" alt="Wait" width="60vw"> <a id="chngpass" class="waves-effect waves-light btn-small bnt cacc2">Change Password</a> </div> </div> </form> </div> </div> <div id="rtnbox"> <table id="tbl"> </table> </div> <div id="notice"> <div id="ntcmain"> <p class="ntc"></p> <p class="ntc"></p> <p class="ntc"></p> </div> </div> <div id="rbar"> <div id="prfl"> <table cellspacing="6"> <tr> <td rowspan="5"> <img id="pdp" src="" alt=""> </td> <td id="pphone"></td> </tr> <tr> <td id="pemail"></td> </tr> <tr> <td id="pht"></td> </tr> <tr> <td id="pbg"></td> </tr> <tr> <td id="pgen"></td> </tr> <tr> <td id="proll"></td> <td id="pext"></td> </tr> <tr> <td id="pname"></td> <td id="updatebox"> <a id="pupdate" class="waves-effect waves-light btn-small">Update Your Info</a> </td> </tr> </table> </div> <div style="background-color:lightcoral;" id="classlinks"> <div id="ltbs" class="ui vertical menu"> </div> </div> </div> </main> <footer>created by pantho</footer> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script> <script> var ccm = localStorage.getItem("ccmcreatedbypantho"); var roll = localStorage.getItem("rollcreatedbypantho"); var firebaseConfig = { apiKey: "AIzaSyCLURN5izFdrpZj724ltZs-n7POi9BXPRc", authDomain: "classmate-ed6b6.firebaseapp.com", databaseURL: "https://classmate-ed6b6-default-rtdb.firebaseio.com", projectId: "classmate-ed6b6", storageBucket: "classmate-ed6b6.appspot.com", messagingSenderId: "1087720629980", appId: "1:1087720629980:web:ab1b3e600f4eee72ff7619", measurementId: "G-9L68BKBD3T" }; firebase.initializeApp(firebaseConfig); firebase.analytics(); var db = firebase.database(); function preloader() { setTimeout(function () { $("#preloader").hide(); }, 4000); } $('#searchbtn>img[src="resources/up-arrow.png"]').hide(); $("#searchtable").hide(); $("#searchbtn").click(function () { $("#searchtable").toggle("slow"); $('#searchbtn>img[src="resources/up-arrow.png"]').toggle("slow"); $('#searchbtn>img[src="resources/friends_search.png"]').toggle("slow"); }); $(document).ready(function () { $("#search").on("keyup", function () { var value = $(this).val().toLowerCase(); $("#myTable tr").filter(function () { $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1) }); }); }); $("#spinner").hide(); $("#blur").hide(); $("#logout").click(function () { $("#blur").fadeToggle(500); }); $("#yes").click(function () { $("#spinner").show(); localStorage.removeItem("ccmcreatedbypantho"); localStorage.removeItem("rollcreatedbypantho"); setTimeout(function () { location.replace("index.html"); }, 3000); }); $("#no").click(function () { $("#blur").fadeOut(500); }); $("#upspinner").hide(); $("#uppassspinner").hide(); $("#updateblur").hide(); $("#pupdate").click(() => { $("#updateblur").fadeIn("slow"); }); $("#closeupbtn").click(() => { $("#updateblur").fadeOut("slow"); }); db.ref(ccm + "/" + roll).on("value", (e) => { var pname = e.val().name; var proll = e.val().roll; var pphone = e.val().phone; var pemail = e.val().email; var pgen = e.val().gr; var pbg = e.val().bg; var pht = e.val().ht; var pext = e.val().ext; if (pgen.toLowerCase() == "male") { var fimgsrc = "resources/mdp.jpg"; } else if (pgen.toLowerCase() == "female") { var fimgsrc = "resources/fdp.jpg"; } $('#pdp').attr('src', fimgsrc); $('#pname').text(pname); $('#proll').text(proll); $('#pphone').text(pphone); $('#pemail').text(pemail); $('#pemail').attr('href', 'mailto:' + pemail); $('#pht').text(pht); $('#pgen').text(pgen); $('#pbg').text(pbg); $('#pext').text(pext); $("#uname")[0].value = pname; $("#uphone")[0].value = pphone; $("#uemail")[0].value = pemail; $("#uht")[0].value = pht; $("#ubg")[0].value = pbg; $("#uext")[0].value = pext; $("#upaccinfo").click((e) => { var luname = $("#uname")[0].value; var luphone = $("#uphone")[0].value; var luemail = $("#uemail")[0].value; var luht = $("#uht")[0].value; var lubg = $("#ubg")[0].value; var luext = $("#uext")[0].value; if (!ValidateEmail(luemail)) { fillupFormValidation($("#updateinfobox"), 7000, "Invalid email"); } else { db.ref(ccm + "/" + roll).update({ name: luname, phone: luphone, email: luemail, ht: luht, bg: lubg, ext: luext }); $("#upspinner").show(); setTimeout(() => { $("#upspinner").hide(); fillupFormValidation($("#updateinfobox"), 7000, "Info Updated"); }, 3000); } }); $("#chngpass").click(() => { var crntpass = $("#crntpass")[0].value; var newpass = $("#newpass")[0].value; var rnewpass = $("#rnewpass")[0].value; var dbpass = e.val().password; if (crntpass == dbpass) { if (newpass == rnewpass) { newpass = newpass.toString(); var len = newpass.length; if (len >= 6) { db.ref(ccm + "/" + roll).update({ password: newpass }); $("#uppassspinner").show(); setTimeout(() => { $("#uppassspinner").hide(); fillupFormValidation($("#passsec"), 14000, "Password Changed"); }, 3000); } else { fillupFormValidation($("#passsec"), 3000, "Password must have minimum 6 digits"); } } else { fillupFormValidation($("#passsec"), 3000, "Retype new password"); } } else { fillupFormValidation($("#passsec"), 3000, "Password Doesn't Match"); } }); }); function ValidateEmail(mail) { if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(mail)) { return (true) } return (false) } function fillupFormValidation(parent, time, notice) { parent.prepend('<p class="alertfillupform" style="background:gray;text-align:center;color:white;">' + notice + '</p>'); $(".alertfillupform").show(); setTimeout(function () { $(".alertfillupform").hide(); $(".alertfillupform").detach(); }, time); } db.ref(ccm + "/cd/").on("value", function (e) { var dblink = e.val().links; dblink.shift(); var len = dblink.length; for (var i = 0; i < len; i++) { var h = dblink[i].head; var l = dblink[i].link; $("#ltbs").append('<a href="' + l + '" target="_blank" class="item lnkitems">Visit ' + h + '</a>'); } }); $('#frndbtn>img[src="resources/up-arrow.png"]').hide(); $("#maintable1").hide(); $("#frndbtn").click(function () { $("#maintable1").toggle("slow"); $('#frndbtn>img[src="resources/up-arrow.png"]').toggle("slow"); $('#frndbtn>img[src="resources/friends.png"]').toggle("slow"); }); db.ref(ccm + '/cd').on('value', function (e) { const ins = e.val().ins; const sins = e.val().sins; const dep = e.val().dep; const year = e.val().year; const ts = e.val().ts; const fr = e.val().fr; const lr = e.val().lr; const ncr = e.val().ncr; const crr = e.val().crr; for (var i = fr; i <= lr; i++) { db.ref(ccm + '/' + i).on('value', function (f) { var froll = f.val().roll; var fname = f.val().name; var fphone = f.val().phone; var femail = f.val().email; var fht = f.val().ht; var fgen = f.val().gr; var fbg = f.val().bg; var fext = f.val().ext; if (fext == null) { fext = ''; } if (fgen == "male") { var fimgsrc = "resources/mdp.jpg"; } else { var fimgsrc = "resources/fdp.jpg"; } if (froll != roll && fname != undefined && fphone != undefined && femail != undefined && fht != undefined && fgen != undefined && fbg != undefined) { $('#frndlst').append('<div class="frnd"> <img src="' + fimgsrc + '" alt="dp"> <div class="frndinfo"> <span class="r">' + froll + '</span><span class="n">' + fname + '</span> <span class="p">' + fphone + '</span> <a href="mailto:' + femail + '" class="e">' + femail + '</a> <span class="g"> ' + fgen + ' </span> <span class="b"> ' + fbg + ' </span> <span class="h"> ' + fht + ' </span> <a href="' + fext + '" class="l" target="_blank"> ' + fext + ' </a> </div> </div>'); $('#myTable').append('<tr style="background:rgba(172, 175, 170, 0.474);"> <td>' + froll + '</td> <td>' + fname + '</td> <td>' + fphone + '</td> <td> <a href="mailto:' + femail + '" target="_blank"> ' + femail + '</a> </td> <td>' + fbg + '</td> <td>' + fht + '</td> <td> <a href="' + fext + '"target="_blank"> ' + fext + ' </a></td> </tr>'); } }); } var routine = e.val().routine; var dur = routine[1]; dur.shift(); var sat = routine[2]; sat.shift(); var sun = routine[3]; sun.shift(); var mon = routine[4]; mon.shift(); var tue = routine[5]; tue.shift(); var wed = routine[6]; wed.shift(); var thu = routine[7]; thu.shift(); var fri = routine[8]; fri.shift(); var period = dur.length; var ad = []; fixAd(sat, 0); fixAd(sun, 1); fixAd(mon, 2); fixAd(tue, 3); fixAd(wed, 4); fixAd(thu, 5); fixAd(fri, 6); function fixAd(din, index) { for (var i = 0; i < period; i++) { if (din[i] == "") { continue; } else { ad[index] = 1; break; } } } var week = ['SAT', 'SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI']; for (var i = (-3); i < 7; i++) { if (i == (-3)) { $("#tbl").append('<tr id="tr1"><th rowspan="3">Period</th></tr>'); for (var j = 1; j <= period; j++) { $("#tr1").append('<td>' + j + '</td>') } } if (i == (-2)) { $("#tbl").append('<tr id="tr2"><td colspan="' + period + '">Time</td></tr>'); } if (i == (-1)) { $("#tbl").append('<tr id="tr3"></tr>'); for (var j = 1; j <= period; j++) { $("#tr3").append('<td>' + dur[j - 1] + '</td>') } } if (ad[i] == 1) { $("#tbl").append('<tr id="day' + i + '"><th>' + week[i] + '</th></tr>'); if (i == 0) { creatClassCell(sat); } else if (i == 1) { creatClassCell(sun); } else if (i == 2) { creatClassCell(mon); } else if (i == 3) { creatClassCell(tue) } else if (i == 4) { creatClassCell(wed); } else if (i == 5) { creatClassCell(thu); } else if (i == 6) { creatClassCell(fri); } } } function creatClassCell(din) { for (var j = 1; j <= period; j++) { if (din[j - 1] == "") { $("#day" + i).append('<td></td>'); } else { var txt = din[j - 1].split("\n"); $("#day" + i).append('<td><b>' + txt[0] + '</b><br><code>' + txt[1] + '</code></td>'); } } } }); var today = new Date(); var yy = today.getYear().toString().substr(1, 2); var mm = (today.getMonth() + 1).toString(); if (mm.length == 1) { mm = 0 + mm; } var day1 = today.getDate(); var day2 = day1 + 1; var day3 = day1 + 2; var day1 = day1.toString(); var day2 = day2.toString(); var day3 = day3.toString(); if (day1.length == 1) { day1 = 0 + day1; } if (day2.length == 1) { day2 = 0 + day2; } if (day3.length == 1) { day3 = 0 + day3; } var date = [day1, day2, day3]; db.ref(ccm + "/cd/routine").on("value", function (e) { var ext = e.val().extra; for (var i = 0; i < 3; i++) { var dateString = date[i] + "/" + mm + "/" + yy; var dbdateString = date[i] + "+" + mm + "+" + yy; var extString; if (ext[dbdateString] == undefined) { extString = "No update"; } else { extString = ext[dbdateString]; } $(".ntc")[i].innerText = dateString + " : " + extString; } }); </script> </body> </html>