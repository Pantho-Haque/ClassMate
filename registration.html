<!DOCTYPE html> <html> <head> <script src="https://use.fontawesome.com/b4f1ce8a81.js"></script> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css"> <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script> <link rel="stylesheet" href="styling/form.css"> <link rel="icon" href="resources/ClassMatelogo.png" type="image/icon type"> <title>ClassMate</title> </head> <body> <main id="main"> <div id="brand"> <img id="brangimg" src="resources/ClassMatelogo.png" alt="logo"> <p id="brandname">ClassMate</p> </div> <div id="rbox"> <div class="row"> <h3 class="dec">Update your info</h3> <form class="col s12"> <div class="row"> <div class="input-field col s12"> <input id="ccm" type="text" class="validate"> <label for="ccm">Class Code *</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="roll" type="text"> <label for="roll">Roll *</label> </div> <div class="input-field col s6"> <input id="name" type="text"> <label for="name">Name *</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="phone" type="text"> <label for="phone">Phone Number *</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="email" type="email"> <label for="email">Email *</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="ht" type="text"> <label for="ht">Hometown/Address *</label> </div> </div> <div id="select"> <select class="ui dropdown" id="gen"> <option value="">Gender *</option> <option value="male">Male</option> <option value="female">Female</option> </select> <select class="ui dropdown" id="bg"> <option value="">Blood Group *</option> <option value="Dontknow">Dont know</option> <option value="a positive(a+)">A+</option> <option value="a negative(a-)">A-</option> <option value="b positive(b+)">B+</option> <option value="b negative(b-)">B-</option> <option value="ab positive(ab+)">AB+</option> <option value="ab negative(ab-)">AB-</option> <option value="o positive(o+)">O+</option> <option value="o negative(o-)">O-</option> </select> </div> <div class="row"> <div class="input-field col s12"> <input id="ext" class="fas fa-external-link-alt" type="text" class="validate"> <label for="ext">Facebook Link</label> </div> </div> </form> </div> <div class="allbtns"> <img src="resources/Spinner.gif" alt="Wait" width="60vw"> <a id="cmaccbtn" class="waves-effect waves-light btn-small bnt cacc2">Create My Account</a> </div> </div> </main> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script> <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script> <script> $(".allbtns>img").hide(); var firebaseConfig = { apiKey: "AIzaSyCLURN5izFdrpZj724ltZs-n7POi9BXPRc", authDomain: "classmate-ed6b6.firebaseapp.com", databaseURL: "https://classmate-ed6b6-default-rtdb.firebaseio.com", projectId: "classmate-ed6b6", storageBucket: "classmate-ed6b6.appspot.com", messagingSenderId: "1087720629980", appId: "1:1087720629980:web:ab1b3e600f4eee72ff7619", measurementId: "G-9L68BKBD3T" }; firebase.initializeApp(firebaseConfig); firebase.analytics(); var db = firebase.database(); $("#cmaccbtn").click(function (e) { e.preventDefault(); var ccm = $("#ccm")[0].value;; var roll = $("#roll")[0].value; var name = $("#name")[0].value; var phone = $("#phone")[0].value; var email = $("#email")[0].value; var ht = $("#ht")[0].value; var gen = $("#gen")[0].value; var bg = $("#bg")[0].value; var ext = $("#ext")[0].value; if (ccm == "" || roll == "" || name == "" || phone == "" || email == "" || ht == "" || gen == "" || bg == "") { fillupFormValidation($("#rbox"), 7000, "Fillup the form"); } else if (!ValidateEmail(email)) { fillupFormValidation($("#rbox"), 7000, "Invalid email"); } else { db.ref().on("value", function (e) { var j = e.val()[ccm]; if (j == undefined) { fillupFormValidation($("#rbox"), 7000, "Invalid Class Code"); } else { db.ref(ccm + "/cd/").on("value", function (f) { var s1 = f.val().fr; s1 = parseInt(s1); var s2 = f.val().lr; s2 = parseInt(s2); roll = parseInt(roll); if (roll >= s1 && roll <= s2) { db.ref(ccm + "/" + roll).update({ bg: bg, email: email, ext: ext, gr: gen, ht: ht, name: name, phone: phone, roll: roll }); $(".allbtns>img").show(); setTimeout(function () { location.replace("index.html"); }, 4000); } else { fillupFormValidation($("#rbox"), 7000, "Invalid Roll"); } }); } }); } }); function ValidateEmail(mail) { if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(mail)) { return (true) } return (false) } function fillupFormValidation(parent, time, notice) { parent.prepend('<p class="alertfillupform" style="background:gray;text-align:center;color:white;">' + notice + '</p>'); $(".alertfillupform").show(); setTimeout(function () { $(".alertfillupform").hide(); $(".alertfillupform").detach(); }, time); } </script> </body> </html>